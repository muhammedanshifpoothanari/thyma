<%- include('../layout/adminNewHEader.ejs') %>
<!-- ======= Header ======= -->
<%- include('../layout/headerNavAdmin.ejs') %>

<%- include('../layout/slidebar.ejs') %>
<style>body {
  background-color: #f2f2f2;
}</style>
<div class="col-12 main" id="main">
  <div class="card top-selling overflow-auto">

    <div class="table-responsive">
      <div id="login-row" class="row justify-content-center align-items-center card">
        <div id="login-column" class="col-md-11" style="margin-top: 80px;">
          <h1 class="text-info">Product list</h1>
          <table class="table table-bordered table-striped">

            <thead class="thead-dark">
              <tr>
                <th scope="col">Product Name</th>
                <th scope="col">Price</th>
                <th scope="col">Description</th>
                <th scope="col">Expiry Date</th>
                <th scope="col">Category</th>
                <th scope="col">Origin</th>
                <th scope="col">Expense/kg</th>
                <th scope="col">Offer</th>
                <th scope="col">Image</th>
                <th scope="col">Status</th>
                <th scope="col">Actions</th>
              </tr>
            </thead>

            <tbody>
              <% products.forEach((product) => { %>
              <tr>
                <td><%= product.name %></td>
                <td><%= product.price %></td>
                <td><%= product.description %></td>
                <td><%= new Date(product.expiryDate).toLocaleDateString('en-GB') %></td>
                <td><%= product.category %></td>
                <td><%= product.origin %></td>
                <td><%= product.expensePerUnit %></td>
                <td><%= product.offer !== null ? product.offer + "%" : "" %></td>
                <td><img src="/userimages/<%= product.image[0] %>" alt="<%= product.name %>" width="100" height="100"></td>
                <td><%= product.isListed ? 'Listed' : 'Unlisted' %></td>
                <td>
                  <% if (product.isListed) { %>
                  <a href="/admin/unlist-product?id=<%= product._id %>" title="Unlist product"><i class="fas fa-eye-slash"></i></a>
                  <% } else { %>
                  <a href="/admin/list-product?id=<%= product._id %>" title="List product"><i class="fas fa-eye"></i></a>
                  <% } %>
                  <a href="/admin/editPostProduct/<%= product._id %>" title="Edit product"><i class="fas fa-edit"></i></a>
                </td>
              </tr>
              <% }); %>
            </tbody>

          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<%- include('../layout/adminNewFooter.ejs') %>